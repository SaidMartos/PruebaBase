<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kallpa 3D - Registro de Usuarios</title> 
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="icon" href="img/favicon.ico" type="image/x-icon"> 
    
    <style>
        /* BASE DE SITE.CSS (ESTILOS MODIFICADOS PARA EL FONDO DEL LOGIN) */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0; 
            
            /* PROPIEDADES COPIADAS DEL LOGIN */
            background-image: url('img/plaza-de-armas-cajamarca.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
            background-attachment: fixed;
            backdrop-filter: blur(1.5px); /* FILTRO DE DESENFOQUE PRINCIPAL (como en el login) */
            /* FIN PROPIEDADES COPIADAS */
            
            position: relative; 
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            /* padding: 14px 20px; <-- ELIMINADO PARA UN CENTRADO PERFECTO */
            min-height: 100vh;
            overflow: hidden; /* SE MANTIENE EL 'hidden' (sin scroll) */
            box-sizing: border-box; /* Añadido para consistencia */
        }

        /* CAPA DE SOMBRA SEMITRANSPARENTE (AUMENTADA LA OPACIDAD A 0.5) */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            /* CAMBIO CLAVE: Aumentado a 0.5 para un efecto más oscuro */
            background-color: rgba(0, 0, 0, 0); 
            z-index: 0;
        }

        /* ESTILOS DEL CONTENEDOR PRINCIPAL (registro_turistas.css) */
        .container-box {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 550px;
            box-sizing: border-box;
            position: relative; 
            margin: auto;
            z-index: 1;
            bottom: 40px;
            /* 'scale' MOVIDO AQUÍ para el efecto zoom */
            transform: scale(0.9); 
        }

h2 {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            text-align: center;
            margin-top: 8px;
            margin-bottom: 15px; /* Reducido de 25px a 15px */
            color: #dc3545;
            font-size: 1.9rem; /* CAMBIO CLAVE: Reducido de 2rem a 1.5rem */
           /* text-transform: capitalize;*/
        }

        /* Estilos de los grupos de formulario */
        .form-group {
            margin-bottom: 18px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            color: #333;
            font-size: 1rem;
        }
        
        /* Contenedor de DNI/Carnet para poner select y input en fila */
        .document-input-group {
            display: flex;
            gap: 10px;
        }

        .document-input-group select,
        .document-input-group input {
            /* Asegura que ambos tomen el espacio disponible */
            flex-grow: 1; 
        }

        /* Estilos de los campos de entrada y selección */
        .form-control {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #ddd;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 1.1rem;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-control:focus {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
            outline: none;
        }

        .form-control::placeholder {
            color: #aaa;
        }
        
        /* Estilos para los botones */
        .btn {
            display: inline-block;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-family: 'Inter', sans-serif; 
            margin-top: 10px; 
        }

        .btn:active {
            transform: translateY(1px);
        }
        
        /* Botón de limpiar (MANTENIDO EN GRIS) */
        .btn-clear {
            background-color: #6c757d;
            color: white;
            width: 48%; /* Mantiene ancho similar al login */
            margin-top: 0; 
        }
        
        .btn-clear:hover {
            background-color: #5a6268;
        }
        
        /* Botón de Registrar/Acceder Carrusel (CAMBIADO A ROJO) */
        .btn-register {
            background-color: #dc3545; /* CAMBIADO A ROJO PRINCIPAL */
            color: white;
            width: 48%; /* Mantiene ancho similar al login */
            margin-top: 0; 
            font-size: 1.1rem; 
        }

        .btn-register:hover {
            background-color: #c82333; /* Hover del color rojo */
        }
        
        /* Botón de Registro Deshabilitado */
        .btn-register:disabled {
            background-color: #e0e0e0;
            color: #a0a0a0;
            cursor: not-allowed;
            transform: none;
        }

        /* Contenedor de botones de Limpiar/Registrar */
        .form-actions {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-top: 25px;
            margin-bottom: 5px; 
        }
        
        /* Botón Ver Lista de Turistas (CAMBIADO A ROJO) */
        .btn-list {
            background-color: #dc3545; /* CAMBIADO A ROJO PRINCIPAL */
            color: white;
            margin-top: 15px; 
            
            /* CÓDIGO AÑADIDO/MODIFICADO PARA CENTRAR */
            display: block; 
            width: 60%; 
            margin-left: auto; 
            margin-right: auto;
            /* FIN CÓDIGO CENTRADO */
        }

        .btn-list:hover {
            background-color: #c82333; /* Hover del color rojo */
        }

        /* Botones flotantes (top-right-buttons) */
        .top-right-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        /* Botón Cerrar Sesión (CAMBIADO A ROJO) */
        .top-right-buttons .btn-logout {
            padding: 8px 12px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 8px;
            width: auto;
            background-color: #dc3545; /* CAMBIADO A ROJO PRINCIPAL */
            color: white; /* Texto blanco */
        }

        .top-right-buttons .btn-logout:hover {
            background-color: #c82333; /* Hover del color rojo */
        }

        /* Mensajes de error/éxito */
        .message-box {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            text-align: center;
            display: none;
            border: 1px solid transparent;
        }

        .message-error {
            background-color: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }

        .message-success {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }

        /* Estilo para mostrar el ID de usuario (Oculto) */
        #userIdDisplay {
            display: none; 
        }
        
        /* Estilo para agrupar campos pequeños (Teléfono y Edad) en una línea */
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1; 
        }

  .styled-hr {
            border: none; /* Elimina el borde por defecto */
            height: 1px; /* Grosor de la línea */
            background-color: #dc3545; /* Color rojo principal, a juego con los botones */
            margin: 18px 0; /* Espacio vertical arriba y abajo */
            border-radius: 30px; /* Bordes ligeramente redondeados */
            opacity: 0.5; /* Ligera transparencia */
        }
        
    </style>
</head>

<body>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        setLogLevel('Debug'); 

        // ----------------------------------------------------------------------------------
        // CONFIGURACIÓN DE FIREBASE
        // ----------------------------------------------------------------------------------
        const appId = (typeof __app_id !== 'undefined' && __app_id) ? String(__app_id) : 'github-pages-default-id';
        
        const LOCAL_FIREBASE_CONFIG = {
            apiKey: "AIzaSyBifMbYtOkxsijnaKlTtl_S_A5dkzE32BM", 
            authDomain: "prueba-ff7bb.firebaseapp.com",
            projectId: "prueba-ff7bb", 
            storageBucket: "prueba-ff7bb.appspot.com",
            messagingSenderId: "700600586061",
            appId: "1:700600586061:web:f1bfae76ae2ff3ed1db104"
        }; 

        const firebaseConfig = typeof __firebase_config !== 'undefined' && JSON.parse(__firebase_config).projectId 
                                         ? JSON.parse(__firebase_config) 
                                         : LOCAL_FIREBASE_CONFIG;
        
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        let db, auth;
        let userId = null;
        let isAuthReady = false;

        // ----------------------------------------------------------------------------------
        // 1. Inicialización y Autenticación
        // ----------------------------------------------------------------------------------
        try {
            if (!firebaseConfig.projectId) {
                throw new Error("La configuración de Firebase está incompleta. No se pudo obtener projectId.");
            }
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            
            // Listener de estado de autenticación
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    userId = user.uid;
                    isAuthReady = true;
                    console.log(`Firebase: Usuario autenticado. UID: ${userId}`); 
                } else {
                    // Intento de autenticación inicial (Custom Token o Anónimo)
                    try {
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth); 
                        }
                    } catch (error) {
                            showMessage("Error al autenticar. Verifica que la Autenticación de Firebase esté activa (Anónimo).", false);
                            console.error("Firebase: Error al intentar autenticar:", error);
                    }
                }
            });

        } catch (error) {
            console.error("Firebase Initialization Error:", error);
            showMessage(`Error de conexión: ${error.message}`, false);
        }

        // --- Funciones de Utilidad ---

        function showMessage(message, isSuccess) {
            const container = document.getElementById('messageContainer');
            container.textContent = message;
            container.className = 'message-box';
            
            if (isSuccess) {
                container.classList.add('message-success');
            } else {
                container.classList.add('message-error');
            }
            container.style.display = 'block';
            setTimeout(() => {
                container.style.display = 'none';
            }, 5000);
        }

        function clearForm() {
            document.getElementById('registroForm').reset();
            document.getElementById('TipoDocumentoSelect').value = "DNI"; // Valor por defecto
            document.getElementById('DNI_Carnet').maxLength = 8; // Restablece límite DNI
            document.getElementById('paisOrigenSelect').value = "Peru";
            document.getElementById('otroPaisGroup').style.display = 'none';
            document.getElementById('otroPaisInput').value = '';
            document.getElementById('SexoSelect').value = ""; 
            document.getElementById('messageContainer').style.display = 'none';
            document.getElementById('btnRegistrar').disabled = false;
        }
        
        async function cerrarSesion() {
            if (!auth) {
                                showMessage("Autenticación no inicializada.", false);
                                return;
            }
            try {
                await signOut(auth); 
                console.log("Sesión cerrada con éxito.");
                showMessage("Sesión cerrada. Redirigiendo...", true);
                window.location.href = 'index.html'; 

            } catch (error) {
                showMessage(`Error al cerrar sesión: ${error.message}`, false);
                console.error("Error al cerrar sesión:", error);
            }
        }
        
        // --- FUNCIÓN PARA CAMBIAR EL LÍMITE DE DIGITOS ---
        function handleDocumentTypeChange() {
            const tipoDoc = document.getElementById('TipoDocumentoSelect').value;
            const inputDoc = document.getElementById('DNI_Carnet');
            inputDoc.value = ''; 
            
            if (tipoDoc === 'DNI') {
                inputDoc.maxLength = 8;
                inputDoc.placeholder = "Ingresar 8 dígitos";
            } else if (tipoDoc === 'Carnet') {
                inputDoc.maxLength = 12;
                inputDoc.placeholder = "Ingresar 12 dígitos";
            } else {
                inputDoc.maxLength = 12; 
                inputDoc.placeholder = "Ingresar Documento";
            }
        }
        
        // --- FUNCIÓN PARA MOSTRAR CAMPO OTRO PAÍS ---
        function handlePaisChange() {
            const pais = document.getElementById('paisOrigenSelect').value;
            const otroPaisGroup = document.getElementById('otroPaisGroup');
            
            if (pais === 'Otro') {
                otroPaisGroup.style.display = 'block';
            } else {
                otroPaisGroup.style.display = 'none';
                document.getElementById('otroPaisInput').value = ''; 
            }
        }
        
        // --- FUNCIÓN DE VALIDACIÓN DE TEXTO (Solo Letras y Espacios) ---
        function validateLettersOnly(event) {
            const pattern = /^[a-zA-Z\u00C0-\u017F\s]*$/; 
            const value = event.target.value;
            
            if (!pattern.test(value)) {
                event.target.value = value.replace(/[^a-zA-Z\u00C0-\u017F\s]/g, '');
            }
        }

        // --- FUNCIÓN DE VALIDACIÓN DE NÚMEROS (Solo Dígitos) ---
        function validateNumbersOnly(event) {
            const pattern = /^\d*$/;
            const value = event.target.value;

            if (!pattern.test(value)) {
                event.target.value = value.replace(/[^\d]/g, '');
            }
        }


        // ----------------------------------------------------------------------------------
        // 2. Lógica de Registro (CON REDIRECCIÓN AL CARRUSEL)
        // ----------------------------------------------------------------------------------
        
        function isFieldEmpty(value) {
            return value === null || value === undefined || (typeof value === 'string' && value.trim() === '');
        }
        
        function isValidNameOrLastName(value) {
            const pattern = /^[a-zA-Z\u00C0-\u017F\s]+$/; 
            return pattern.test(value.trim());
        }
        
        function isValidDocumentNumber(value) {
            const pattern = /^\d+$/; 
            return pattern.test(value.trim());
        }
        
        // Función para validar Edad
        function isValidAge(value) {
             const age = value.trim();
             // Debe ser un número, no vacío, y estar entre 1 y 99 (máx 2 dígitos)
             return isValidDocumentNumber(age) && age.length >= 1 && age.length <= 2 && parseInt(age, 10) > 0;
        }

        async function registrarTurista() {
            const btnRegistrar = document.getElementById('btnRegistrar');
            btnRegistrar.disabled = true;

            if (!isAuthReady || !userId) {
                showMessage("Autenticación no completa. Intenta nuevamente o recarga la página.", false);
                btnRegistrar.disabled = false;
                return;
            }
            if (!db) {
                showMessage("Base de datos no inicializada.", false);
                btnRegistrar.disabled = false;
                return;
            }
            
            const form = document.getElementById('registroForm');
            const tipoDoc = form.TipoDocumentoSelect.value;
            const paisOrigen = form.paisOrigenSelect.value;
            const otroPais = form.otroPaisInput.value.trim(); 

            const turistaData = {
                TipoDocumento: tipoDoc,
                DNI_Carnet: form.DNI_Carnet.value.trim(),
                ApellidoPaterno: form.ApellidoPaterno.value.trim(),
                ApellidoMaterno: form.ApellidoMaterno.value.trim(),
                Nombres: form.Nombres.value.trim(),
                Edad: form.Edad.value.trim(),
                Telefono: form.Telefono.value.trim(),
                Sexo: form.SexoSelect.value,
                PaisOrigen: paisOrigen === 'Otro' ? otroPais : paisOrigen, 
                FechaRegistro: new Date().toISOString(), 
                RegistradoPor: userId 
            };

            // === LÓGICA DE VALIDACIÓN ESTRICTA DE TODOS LOS CAMPOS ===
            let camposVacios = [];
            
            // 1. VALIDACIÓN DE CAMPOS VACÍOS
            if (isFieldEmpty(turistaData.DNI_Carnet)) camposVacios.push(tipoDoc);
            if (isFieldEmpty(turistaData.ApellidoPaterno)) camposVacios.push("Apellido Paterno");
            if (isFieldEmpty(turistaData.ApellidoMaterno)) camposVacios.push("Apellido Materno");
            if (isFieldEmpty(turistaData.Nombres)) camposVacios.push("Nombres");
            if (isFieldEmpty(turistaData.Edad)) camposVacios.push("Edad");
            if (isFieldEmpty(turistaData.Telefono)) camposVacios.push("Teléfono");
            if (isFieldEmpty(turistaData.Sexo)) camposVacios.push("Sexo");
            
            if (isFieldEmpty(paisOrigen)) {
                  camposVacios.push("País de Origen");
            } else if (paisOrigen === 'Otro' && isFieldEmpty(otroPais)) {
                camposVacios.push("Especificar País"); 
            }

            if (camposVacios.length > 0) {
                showMessage(`❌ Faltan los siguientes campos obligatorios: ${camposVacios.join(', ')}.`, false);
                btnRegistrar.disabled = false;
                return; 
            }
            
            // 2. VALIDACIÓN DE FORMATO DE CARACTERES
            
            // Validación de DNI/Carnet y Teléfono: Solo números
            if (!isValidDocumentNumber(turistaData.DNI_Carnet)) {
                showMessage(`❌ El campo ${tipoDoc} solo debe contener números.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            if (!isValidDocumentNumber(turistaData.Telefono)) {
                showMessage(`❌ El campo Teléfono solo debe contener números.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            // Validación de Edad: Solo números y formato correcto
            if (!isValidAge(turistaData.Edad)) {
                showMessage(`❌ La Edad debe ser un número válido de 1 o 2 dígitos (ej: 25).`, false);
                btnRegistrar.disabled = false;
                return;
            }

            // Validación de Nombres/Apellidos/Otro País: Solo letras/espacios
            if (!isValidNameOrLastName(turistaData.ApellidoPaterno)) {
                showMessage(`❌ Apellido Paterno solo debe contener letras.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            if (!isValidNameOrLastName(turistaData.ApellidoMaterno)) {
                showMessage(`❌ Apellido Materno solo debe contener letras.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            if (!isValidNameOrLastName(turistaData.Nombres)) {
                showMessage(`❌ Nombres solo debe contener letras.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            if (paisOrigen === 'Otro' && !isValidNameOrLastName(otroPais)) {
                showMessage(`❌ El campo 'Especificar País' solo debe contener letras.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            
            // 3. VALIDACIÓN DE LONGITUD DEL DOCUMENTO
            const lenDoc = turistaData.DNI_Carnet.length;
            if (tipoDoc === 'DNI' && lenDoc !== 8) {
                showMessage(`❌ El DNI debe tener exactamente 8 dígitos. Ingresaste ${lenDoc}.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            if (tipoDoc === 'Carnet' && (lenDoc < 6 || lenDoc > 12)) {
                showMessage(`❌ El Carnet de Extranjería debe tener entre 6 y 12 dígitos. Ingresaste ${lenDoc}.`, false);
                btnRegistrar.disabled = false;
                return;
            }
            // =========================================================

            showMessage("Registrando turista y redirigiendo al carrusel...", true);

            try {
                // RUTA CRÍTICA: artifacts/{appId}/public/data/turistas
                const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'turistas');
                
                // Excluir el campo de otroPais si se usó un país de la lista
                const dataToSave = {...turistaData};
                if (paisOrigen !== 'Otro') {
                    // El campo OtroPais no se incluyó en turistaData, solo se utiliza 'PaisOrigen'
                }
                
                await addDoc(colRef, dataToSave);

                // **PASO CLAVE: REDIRECCIÓN EXITOSA**
                showMessage("✅ Turista registrado exitosamente. Accediendo al carrusel...", true);
                setTimeout(() => {
                    window.location.href = 'carrucel.html'; // Redirige al carrusel
                }, 1500); // Espera 1.5 segundos para mostrar el mensaje de éxito
                
            } catch (error) {
                console.error("Error al registrar turista en Firestore:", error);
                
                if (error.code === 'permission-denied' || error.message.includes('insufficient permissions')) {
                    showMessage("❌ Error al guardar en la base de datos: Missing or insufficient permissions. (Revisa el AppId y las Reglas de Seguridad)", false);
                } else {
                    showMessage(`❌ Error de Firestore: ${error.message}`, false);
                }
                
                btnRegistrar.disabled = false;
            }
        }

        // Asignación de eventos al cargar el documento
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('btnRegistrar').addEventListener('click', registrarTurista);
            document.getElementById('btnClear').addEventListener('click', clearForm);
            document.getElementById('btnCerrarSesion').addEventListener('click', cerrarSesion);
            
            // Eventos para límites de dígitos
            document.getElementById('TipoDocumentoSelect').addEventListener('change', handleDocumentTypeChange);
            document.getElementById('paisOrigenSelect').addEventListener('change', handlePaisChange);
            
            // Eventos de Validación en tiempo real (input)
            document.getElementById('DNI_Carnet').addEventListener('input', validateNumbersOnly);
            document.getElementById('Telefono').addEventListener('input', validateNumbersOnly);
            document.getElementById('Edad').addEventListener('input', validateNumbersOnly);
            
            document.getElementById('ApellidoPaterno').addEventListener('input', validateLettersOnly);
            document.getElementById('ApellidoMaterno').addEventListener('input', validateLettersOnly);
            document.getElementById('Nombres').addEventListener('input', validateLettersOnly);
            document.getElementById('otroPaisInput').addEventListener('input', validateLettersOnly);
            
            // Inicializar el límite de DNI al cargar la página (8 digitos por defecto)
            handleDocumentTypeChange();
        });

    </script>
    
    <div class="top-right-buttons">
        <button id="btnCerrarSesion" class="btn btn-logout">Cerrar Sesión</button>
    </div>

    <div class="container-box">
        <h2 class="text-center">¡Bienvenido a la Ficha De Registro!</h2>
        
        <div id="messageContainer" class="message-box" style="display: none;">
        </div>

        <form id="registroForm">
            <div class="form-group">
                <label for="TipoDocumentoSelect">Documento de Identidad</label>
                <div class="document-input-group">
                    <select id="TipoDocumentoSelect" name="TipoDocumentoSelect" class="form-control" required>
                        <option value="DNI" selected>D.N.I. (8 digitos)</option>
                        <option value="Carnet">Carnet de Extranjería (12 digitos)</option>
                    </select>
                    <input type="text" id="DNI_Carnet" name="DNI_Carnet" class="form-control" placeholder="Ingresar D.N.I." maxlength="8" inputmode="numeric" required>
                </div>
            </div>

            <div class="form-group">
                <label for="ApellidoPaterno">Apellido Paterno</label>
                <input type="text" id="ApellidoPaterno" name="ApellidoPaterno" class="form-control" maxlength="50" pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]*" required>
            </div>

            <div class="form-group">
                <label for="ApellidoMaterno">Apellido Materno</label>
                <input type="text" id="ApellidoMaterno" name="ApellidoMaterno" class="form-control" maxlength="50" pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]*" required>
            </div>

            <div class="form-group">
                <label for="Nombres">Nombres</label>
                <input type="text" id="Nombres" name="Nombres" class="form-control" maxlength="50" pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]*" required>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="Telefono">Teléfono</label>
                    <input type="tel" id="Telefono" name="Telefono" class="form-control" maxlength="15" inputmode="numeric" pattern="[0-9]*" required>
                </div>
                
                <div class="form-group">
                    <label for="Edad">Edad</label>
                    <input type="text" id="Edad" name="Edad" class="form-control" maxlength="2" inputmode="numeric" pattern="[0-9]*" placeholder="Ej: 25" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="SexoSelect">Sexo</label>
                <select id="SexoSelect" name="SexoSelect" class="form-control" required>
                    <option value="" disabled selected>-- Seleccionar Sexo --</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>

            <div class="form-group">
                <label for="paisOrigenSelect">País de Origen</label>
                <select id="paisOrigenSelect" name="paisOrigenSelect" class="form-control" required>
                    <option value="" disabled>-- Seleccionar País --</option>
                    <option value="Peru" selected>Perú</option>
                    <option value="Colombia">Colombia</option>
                    <option value="Ecuador">Ecuador</option>
                    <option value="Chile">Chile</option>
                    <option value="Venezuela">Venezuela</option>
                    <option value="Argentina">Argentina</option>
                    <option value="Brasil">Brasil</option>
                    <option value="España">España</option>
                    <option value="EEUU">Estados Unidos</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>
            
            <div class="form-group" id="otroPaisGroup" style="display: none;">
                <label for="otroPaisInput">Especificar País</label>
                <input type="text" id="otroPaisInput" name="otroPaisInput" class="form-control" maxlength="50" pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]*" placeholder="Especifique el país">
            </div>

            <div class="form-actions">
                <button type="button" id="btnClear" class="btn btn-clear">Limpiar Campos</button>
                <button type="button" id="btnRegistrar" class="btn btn-register">Registrar</button>
            </div>
            
        </form>
        <hr class="styled-hr">
        <a href="lista_turistas.html" class="btn btn-list">Ver Lista de Turistas</a>
    </div>
    
    <div id="userIdDisplay"></div>
</body>
</html>